# 技术分析模式

本文档提供详细的技术分析模式和指南。

## 分析框架

### 1. 项目发现

**查找内容：**
- 顶级项目目录
- 项目指标：README.md、package.json、requirements.txt等
- 文档目录（docs/、documentation/）
- 揭示项目类型的配置文件

**关键文件检查：**
- `README.md` - 项目概述和目的
- `package.json` / `requirements.txt` / `Cargo.toml` - 依赖和技术栈
- `CHANGELOG.md` - 演进和最新变化
- `AGENTS.md` / `CONTRIBUTING.md` - 设计指南和模式
- `docs/` 目录 - 架构文档

### 2. 核心原理提取（重点）

**要回答的问题：**
1. 这个项目解决什么根本问题？
2. 核心设计决策是什么？
3. 做了哪些权衡以及为什么？
4. 关键抽象是什么？

**分析方法：**
- 阅读README了解高级目的
- 审查架构文档
- 检查源代码结构（src/、lib/等）
- 在代码组织中寻找设计模式
- 识别扩展/插件机制

### 3. 架构分析

**要识别的组件：**
- 主要入口点
- 核心模块/组件
- 扩展/插件系统
- 通信机制
- 数据流模式

**文档结构：**
- 系统概述图（基于文本）
- 组件描述
- 交互模式
- 扩展点

### 4. 实现深度分析

**要涵盖的领域：**
- 技术栈（语言、框架、库）
- 构建和部署流程
- 配置机制
- 测试方法
- 开发工作流

**代码分析：**
- 审查关键源文件
- 理解模块组织
- 识别使用的设计模式
- 审查扩展/插件实现

### 5. 最新更新分析

**来源：**
- CHANGELOG.md
- 最近的提交（如果可访问）
- 发布说明
- 文档更新

**要提取的内容：**
- 最近的架构变化
- 新功能及其实现
- 破坏性变化
- 性能改进
- 安全更新

## 按项目类型的分析模式

### Node.js/TypeScript项目

**关键文件：**
- `package.json` - 依赖、脚本、项目元数据
- `tsconfig.json` - TypeScript配置
- `src/` 或 `lib/` - 源代码
- `extensions/` - 插件系统（如果存在）

**分析重点：**
- 模块系统（ESM vs CommonJS）
- 构建流程
- 扩展/插件架构
- 类型系统使用

### Python项目

**关键文件：**
- `requirements.txt` 或 `pyproject.toml` - 依赖
- `setup.py` 或 `setup.cfg` - 包配置
- `src/` 或包目录 - 源代码

**分析重点：**
- 包结构
- 依赖管理
- 虚拟环境设置
- 测试框架

### 多语言项目

**分析方法：**
- 识别语言边界
- 理解语言间通信
- 记录平台特定组件
- 解释集成模式

## 文档生成指南

### 结构

每次分析应生成以下文档（根据复杂度）：

1. **核心原理**（`<项目>-核心技术原理.md`）- 所有项目必须
   - 基础设计决策
   - 关键抽象
   - 架构模式
   - 最新技术更新

2. **架构设计**（`<项目>-架构设计.md`）- 中等/复杂项目
   - 系统概述
   - 组件描述
   - 数据流
   - 扩展点
   - 通信模式

3. **实现细节**（`<项目>-实现细节.md`）- 复杂项目
   - 技术栈
   - 依赖
   - 实现模式
   - 构建和部署
   - 配置

### 写作风格

- **简洁但全面** - 聚焦本质，而非细节
- **使用示例** - 在说明原理时包含代码片段
- **引用特定文件** - 指向实际源文件/组件
- **使用结构化文本** - 清晰的章节、要点、代码块
- **突出创新** - 这个项目的独特之处是什么？

### 质量检查清单

- [ ] 核心原理清晰识别
- [ ] 架构通过组件关系解释
- [ ] 技术栈已记录
- [ ] 扩展机制已描述
- [ ] 包含最新更新
- [ ] 在相关时提供代码示例
- [ ] 包含源文件引用
- [ ] 清晰、简洁的写作

## 复杂度判断标准

### 简单项目
- 单一主要功能
- 文件数量 < 100
- 依赖 < 20个
- **只生成核心原理文档**

### 中等项目
- 多个模块但结构清晰
- 文件数量 100-500
- 依赖 20-50个
- **生成核心原理 + 架构文档**

### 复杂项目
- 多个子系统、插件系统
- 文件数量 > 500
- 依赖 > 50个
- **生成完整的三份文档**

## 示例分析工作流

1. **初始发现**
   ```bash
   python scripts/analyze_project.py --project-dir project/ --output-dir sumup/
   ```

2. **深度分析**
   - 阅读README.md了解概述
   - 审查docs/目录
   - 检查源代码结构
   - 分析关键组件
   - 审查CHANGELOG.md了解最新变化

3. **文档生成**
   - 填写核心原理文档
   - 完成架构概述
   - 记录实现细节
   - 添加代码示例
   - 包含最新更新

4. **审查和完善**
   - 确保完整性
   - 验证准确性
   - 检查清晰度
   - 添加缺失细节
