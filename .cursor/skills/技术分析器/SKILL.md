---
name: tech-analyzer
description: 分析project目录下的开源技术项目，提取核心技术原理、架构模式和关键实现细节。自动生成技术文档到sumup目录。当用户需要理解project目录下技术的核心原理、提取技术要点或生成技术总结文档时使用。
---

# 技术分析器

## 概述

本技能用于分析`project/`目录下的开源技术项目，提取其核心技术原理、架构模式和实现细节，然后自动生成技术文档到`sumup/`目录。

## 工作流程

### 1. 发现项目

扫描`project/`目录识别技术项目：
- 查找顶级目录（如`project/clawdbot/`）
- 通过关键文件识别项目类型（README.md、package.json等）
- 列出所有发现的项目

### 2. 分析每个项目

对每个项目进行深度分析，**重点关注核心原理**：

**项目识别：**
- 阅读README.md了解项目目的
- 检查package.json/requirements.txt了解依赖和技术栈
- 查看项目结构理解组织方式

**核心原理提取（重点）：**
- 识别架构模式（如网关模式、插件系统、多通道架构）
- 提取核心设计决策和权衡
- 理解数据流和组件交互
- 识别关键抽象和接口
- **根据项目复杂度调整分析深度**：
  - 简单项目：核心原理 + 基本架构
  - 中等项目：核心原理 + 架构 + 关键技术选型
  - 复杂项目：核心原理 + 详细架构 + 实现细节 + 扩展机制

**技术深度分析：**
- 分析源代码结构（src/、extensions/等）
- 理解扩展/插件机制
- 审查配置和部署模式
- 识别通信协议和API

**文档审查：**
- 阅读docs/了解架构说明
- 审查AGENTS.md或类似文件了解设计指南
- 检查CHANGELOG.md了解演进和最新变化

### 3. 生成技术文档

在`sumup/`目录下**按项目名创建子文件夹**，每个项目的文档放入对应文件夹：

**输出规则：文件夹名称与项目名称相同。**

**文档结构（根据项目复杂度调整）：**

简单项目：
```
sumup/
└── <项目名>/
    └── 核心技术原理.md    # 核心原理 + 基本架构
```

中等/复杂项目：
```
sumup/
└── <项目名>/
    ├── 核心技术原理.md    # 核心设计原则、关键抽象
    ├── 架构设计.md        # 系统组件、数据流、交互模式
    └── 实现细节.md        # 关键技术、框架、模式
```

例如分析 `clawdbot` 时，输出为 `sumup/clawdbot/核心技术原理.md`、`sumup/clawdbot/架构设计.md`、`sumup/clawdbot/实现细节.md`。

**内容要求：**
- **核心原理**：基础设计决策、架构模式、关键抽象（必须）
- **架构设计**：系统组件、数据流、交互模式（中等/复杂项目）
- **实现细节**：关键技术、框架、使用的模式（复杂项目）
- **最新更新**：CHANGELOG或最近提交的技术变化

### 4. 使用分析脚本

使用`scripts/analyze_project.py`自动完成项目发现和深度分析：

```bash
python scripts/analyze_project.py --project-dir project/ --output-dir sumup/
```

脚本将：
- 发现目录中的所有项目
- 提取基本元数据（名称、描述、技术栈）
- **在输出目录下按项目名创建子文件夹**（如 `sumup/clawdbot/`）
- **自动分析核心原理**（读取关键文件，提取架构模式）
- **根据项目复杂度生成相应深度的文档到该子文件夹**
- 创建完整的markdown文档（不只是模板）

## 分析指南

### 重点领域

1. **核心原理（必须）**：基础设计决策是什么？解决了什么问题？
2. **架构模式**：系统如何组织？主要组件是什么？
3. **扩展机制**：系统如何允许扩展/插件？
4. **通信模式**：组件如何通信？
5. **技术选型**：使用了什么技术、框架和模式？为什么？
6. **最新创新**：最新的技术更新是什么？

### 文档质量

- 简洁但全面
- **聚焦技术本质，而非表面细节**
- 在说明核心原理时包含代码示例
- 在相关时引用特定文件/组件
- 使用结构化文本解释架构
- 突出独特或创新的方法

### 复杂度判断标准

**简单项目：**
- 单一主要功能
- 文件数量 < 100
- 依赖 < 20个
- 只生成核心原理文档

**中等项目：**
- 多个模块但结构清晰
- 文件数量 100-500
- 依赖 20-50个
- 生成核心原理 + 架构文档

**复杂项目：**
- 多个子系统、插件系统
- 文件数量 > 500
- 依赖 > 50个
- 生成完整的三份文档

## 示例分析：Clawdbot

对于Clawdbot这样的复杂项目，分析应涵盖：

**核心原理：**
- 基于网关的控制平面架构
- 多通道消息抽象
- 基于技能的扩展性
- 本地优先设计

**架构设计：**
- Gateway WebSocket控制平面
- 通道扩展（WhatsApp、Telegram、Slack等）
- 带工具流的Agent运行时
- 会话管理和路由

**实现细节：**
- TypeScript/Node.js核心
- 工作区包的扩展系统
- 通过CDP进行浏览器自动化
- 语音和Canvas能力

## 输出格式

生成清晰的Markdown文档，包含明确的章节：

```markdown
# <项目名> - 核心技术原理

## 概述
项目及其目的的简要描述。

## 核心设计原则
1. 原则1：说明
2. 原则2：说明
...

## 架构概述
[架构描述]

## 关键技术
- 技术1：用途
- 技术2：用途
...

## 最新更新
[最近的技术变化]
```

## 资源

### scripts/analyze_project.py
自动化项目发现和深度分析脚本。脚本会：
- 自动判断项目复杂度
- 提取核心原理（不只是元数据）
- 根据复杂度生成相应深度的文档
- 参见脚本文档了解用法。

### references/分析模式.md
技术分析的详细模式和指南。
